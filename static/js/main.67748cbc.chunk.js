(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/resizedlogo.613fc992.png"},12:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),c=a.n(l),u=(a(17),a(11)),i=a(2),o=a(5),s=a.n(o),m=a(8),f=a(1),d={filterByName:{name:""},filterByNumericValues:[]},p=["population","orbital_period","diameter","rotation_period","surface_water"],E=["maior que","menor que","igual a"],b=function(){return fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))},v=Object(n.createContext)();function h(e){var t=e.children,a=Object(n.useState)([]),l=Object(f.a)(a,2),c=l[0],o=l[1],E=Object(n.useState)([]),h=Object(f.a)(E,2),j=h[0],O=h[1],g=Object(n.useState)(!0),N=Object(f.a)(g,2),y=N[0],C=N[1],k=Object(n.useState)(d),x=Object(f.a)(k,2),w=x[0],B=x[1],S=Object(n.useState)("population"),V=Object(f.a)(S,2),P=V[0],_=V[1],q=Object(n.useState)("maior que"),F=Object(f.a)(q,2),L=F[0],J=F[1],z=Object(n.useState)("0"),A=Object(f.a)(z,2),D=A[0],G=A[1],I=Object(n.useState)(p),R=Object(f.a)(I,2),U=R[0],W=R[1],H=function(){var e=Object(m.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,a=t.results,o(a),O(a),C(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){H()}),[]);Object(n.useEffect)((function(){!function(){var e=w.filterByNumericValues.map((function(e){return e.column})),t=p.filter((function(t){return!e.includes(t)}));W(t)}()}),[w]);var K={data:c,isLoading:y,filters:w,handleChange:function(e){var t=e.target;B(Object(i.a)(Object(i.a)({},w),{},{filterByName:{name:t.value}}));var a=c.filter((function(e){return e.name.toLowerCase().includes(t.value.toLowerCase())}));O(a)},renderPlanets:j,handleClick:function(){B(Object(i.a)(Object(i.a)({},w),{},{filterByNumericValues:[].concat(Object(u.a)(w.filterByNumericValues),[{column:P,comparison:L,value:D}])})),function(){var e=j.filter((function(t){return"maior que"===L?Number(t[P])>Number(D):"menor que"===L?Number(t[P])<Number(D):"igual a"===L?Number(t[P])===Number(D):e}));O(e)}()},setColumn:_,setComparison:J,setValue:G,columnOptions:U,deleteFilter:function(e){B(Object(i.a)(Object(i.a)({},w),{},{filterByNumericValues:w.filterByNumericValues.filter((function(t){return!t.column.includes(e)}))})),O(c)}};return r.a.createElement(v.Provider,{value:K},t)}var j=a(9),O=a.n(j);function g(){return r.a.createElement("section",{className:"not-found"},r.a.createElement("h3",null,"Nenhum planeta encontrado"),r.a.createElement("img",{src:O.a,alt:"Gif of R2-D2 sadly beeping"}))}function N(){var e=Object(n.useContext)(v),t=e.data,a=e.renderPlanets;return 0===a.length?r.a.createElement(g,null):r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,Object.keys(t[0]).filter((function(e){return!e.includes("residents")})).map((function(e,t){return r.a.createElement("th",{key:t},e.charAt(0).toUpperCase()+e.slice(1).replace("_"," "))})))),r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population),r.a.createElement("td",null,e.films),r.a.createElement("td",null,e.created),r.a.createElement("td",null,e.edited),r.a.createElement("td",null,e.url))}))))}var y=a(10),C=a.n(y);function k(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("img",{src:C.a,alt:"Star Wars logo"}),r.a.createElement("h1",null,"Planet Search")))}function x(){var e=Object(n.useContext)(v),t=e.handleChange,a=e.handleClick,l=e.setColumn,c=e.setComparison,u=e.setValue,i=e.columnOptions;return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"search"},r.a.createElement("input",{id:"search",type:"text",className:"input-control search-input",placeholder:"Pesquisar planeta",onChange:t,"data-testid":"name-filter"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",null,r.a.createElement("select",{name:"column",className:"input-control",onChange:function(e){var t=e.target.value;return l(t)},"data-testid":"column-filter"},i.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",null,r.a.createElement("select",{name:"comparison",className:"input-control",onChange:function(e){var t=e.target.value;return c(t)},"data-testid":"comparison-filter"},E.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",null,r.a.createElement("input",{type:"number",className:"input-control",onChange:function(e){var t=e.target.value;return u(t)},"data-testid":"value-filter"})),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"filter-btn",onClick:a,"data-testid":"button-filter"},"Filtrar"))))}function w(){var e=Object(n.useContext)(v),t=e.filters.filterByNumericValues,a=e.deleteFilter;return r.a.createElement("section",{className:"filters-section"},t.map((function(e,t){var n=e.column,l=e.comparison,c=e.value;return r.a.createElement("div",{key:t,"data-testid":"filter",className:"filter"},r.a.createElement("p",null,n," ",l," ",c),r.a.createElement("button",{type:"button",className:"delete-btn",onClick:function(){return a(n)}},"x"))})))}function B(){return r.a.createElement("h1",{className:"loading"},"Carregando...")}function S(){var e=Object(n.useContext)(v).isLoading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null),r.a.createElement(x,null),r.a.createElement(w,null),e?r.a.createElement(B,null):r.a.createElement(N,null))}var V=function(){return r.a.createElement(h,null,r.a.createElement(S,null))};c.a.render(r.a.createElement(V,null),document.getElementById("root"))},9:function(e,t,a){e.exports=a.p+"static/media/sad-beep.28f8a874.gif"}},[[12,1,2]]]);
//# sourceMappingURL=main.67748cbc.chunk.js.map